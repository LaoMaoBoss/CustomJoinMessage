# 消息转换示例

## 新的转换方式说明

我们从"拦截"改为"转换"系统消息，这样更可靠且兼容性更好。

## 转换示例

### 英文系统消息转换

**原始系统消息：**
```
Player123 joined the game
```
**转换后：**
```
✅ Player123 加入了服务器！
```

**原始系统消息：**
```
Player123 left the game
```
**转换后：**
```
❌ Player123 离开了服务器！
```

### 中文系统消息转换

**原始系统消息：**
```
Player123 加入了游戏
```
**转换后：**
```
✅ Player123 加入了服务器！
```

**原始系统消息：**
```
Player123 离开了游戏
```
**转换后：**
```
❌ Player123 离开了服务器！
```

## 工作原理

1. **监听所有消息**：监听聊天消息和插件消息
2. **模式匹配**：使用正则表达式识别系统消息
3. **提取玩家名**：从系统消息中准确提取玩家名
4. **验证有效性**：确保玩家名有效且是真实玩家
5. **转换格式**：将系统消息转换为我们的自定义格式
6. **替换发送**：阻止原消息，发送转换后的消息

## 支持的消息格式

### 加入消息模式
- `Player joined the game`
- `Player has joined`
- `Player connected`
- `Player logged in`
- `Player 加入了游戏`
- `Player 进入了服务器`
- `Player 连接到服务器`

### 离开消息模式
- `Player left the game`
- `Player has left`
- `Player disconnected`
- `Player quit`
- `Player logged out`
- `Player 离开了游戏`
- `Player 退出了服务器`
- `Player 断开了连接`

## 安全措施

- **智能识别**：不会转换已经是自定义格式的消息（包含✅❌）
- **玩家验证**：验证提取的玩家名是否为有效的Minecraft用户名
- **在线检查**：确保玩家确实在线或最近加入过
- **格式保护**：保护我们自己的自定义消息格式